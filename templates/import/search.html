<section id="recherche">
    <!--À incorporer le système de recherche-->
    <nav id="filtres">
        <div id="search-bar">
            <form id="search-form" action="./globalSearch" role="search" method="post">
                <label id="search-label" for="search">Recherche</label>
                <input autocomplete="off" id="search" type="search" name="searchValue" placeholder="Rechercher..."
                       autofocus required/>
                <button id="search-button" type="submit">Valider</button>
                <ul id="search-suggestions"></ul>
            </form>
        </div>
        <ul>
            <li>
                <a id="search-presidence" class="filter" href="./globalSearch?filter=presidence">PRESIDENCE</a>
            </li>
            <li>
                <a id="search-assistance" class="filter" href="./globalSearch?filter=assistance">ASSISTANCE</a>
            </li>
            <li>
                <a id="search-communication" class="filter" href="./globalSearch?filter=communication">COMMUNICATION</a>
            </li>
            <li>
                <a id="search-rh" class="filter" href="./globalSearch?filter=rh">RESOURCES HUMAINES</a>
            </li>
            <li>
                <a id="search-finance" class="filter" href="./globalSearch?filter=finance">FINANCE</a>
            </li>
            <li>
                <a id="search-marketing" class="filter" href="./globalSearch?filter=marketing">MARKETING</a>
            </li>
            <li>
                <a id="search-informatique" class="filter" href="./globalSearch?filter=informatique">INFORMATIQUE</a>
            </li>
        </ul>
    </nav>
</section>
<script>
    const suggestions = [
        {% for suggestion in suggestions %}
            "{{ suggestion }}",
        {% endfor %}
    ];
    const searchInput = document.getElementById("search");
    const searchSuggestions = document.getElementById("search-suggestions");

    searchInput.addEventListener("input", function () {
        searchSuggestions.innerHTML = "";
        if (searchInput.value.length > 0) {
            for (let i = 0; i < suggestions.length; i++) {
                if (suggestions[i].toLowerCase().includes(searchInput.value.toLowerCase())) {
                    const suggestion = document.createElement("li");
                    suggestion.innerHTML = `<a href="./profile?user=${suggestions[i]}">${suggestions[i]}</a>`;
                    searchSuggestions.appendChild(suggestion);
                }
            }
        }
    });

</script>